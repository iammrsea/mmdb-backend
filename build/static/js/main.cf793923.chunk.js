(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{49:function(e,t,a){e.exports=a(86)},54:function(e,t,a){},76:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(41),l=a.n(c),o=(a(54),a(7)),i=a(4),s=a(11),m=a(3),u=a(2),d=a(1),f=function(e){var t=e.id,a=e.labelClassName,n=e.styleLabel,c=e.label,l=Object(u.a)(e,["id","labelClassName","styleLabel","label"]);return r.a.createElement("div",{className:Object(d.a)(["input-field",{"login-label":n}])},r.a.createElement(m.b,Object.assign({},l,{id:t})),t&&c&&r.a.createElement("label",{className:a,htmlFor:t},c))};f.defaultProps={labelClassName:"active"};var E=f,g=function(e){var t=e.children,a=e.className,n=Object(u.a)(e,["children","className"]);return r.a.createElement("div",Object.assign({className:Object(d.a)(["row",a])},n),t)},p=a(14),h=function(e){var t=e.sm,a=e.md,n=e.lg,r=e.smOffset,c=e.mdOffset,l=e.lgOffset,o=e.className,i="s".concat(t),s="m".concat(a),m="l".concat(n),u="offset-s".concat(r),f="offset-m".concat(c),E="offset-l".concat(l);return Object(d.a)(["col",Object(p.a)({},i,t),Object(p.a)({},s,a),Object(p.a)({},m,n),Object(p.a)({},u,r),Object(p.a)({},f,c),Object(p.a)({},E,l),o])},b=function(e){var t=e.children,a=Object(u.a)(e,["children"]);return r.a.createElement("div",{className:h(a)},t)},v=function(e){var t=e.children,a=e.className,n=Object(u.a)(e,["children","className"]);return r.a.createElement("button",Object.assign({style:{textTransform:"capitalize"},className:Object(d.a)(["btn waves-effect waves-light btn-flat product-btn",a])},n),t)},y=function(e){var t=e.children,a=e.className,n=Object(u.a)(e,["children","className"]);return r.a.createElement("button",Object.assign({style:{textTransform:"capitalize"},className:Object(d.a)(["btn waves-effect waves-light btn-flat ",{"product-btn":!a},a])},n),t)},N={login:{height:"100vh",marginBottom:0},header:{marginTop:0,padding:40},input:{padding:"15px",borderRadius:"5px",boxSizing:"border-box",color:"#fff",fontSize:"18px"}},O=function(e){var t=e.handleSubmit;Object(i.g)();return r.a.createElement(g,{className:"grey lighten-5 login",style:N.login},r.a.createElement("h2",{className:"header center-align white-text",style:N.header},"Sign In"),r.a.createElement(g,null,r.a.createElement(b,{sm:12,md:8,mdOffset:2},r.a.createElement(xe,null,r.a.createElement(m.d,{initialValues:{email:"",password:""},validate:function(e){var t={};return e.email?e.password||(t.password="Password is required"):t.email="Email is required",t},onSubmit:t},(function(e){var t=e.isSubmitting,a=e.submitForm;return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement(je,null),r.a.createElement(m.c,null,r.a.createElement(E,{type:"text",name:"email",label:"Email",id:"email",autoFocus:!0,styleLabel:"login-label",style:Object(s.a)({},N.input,{marginBottom:20})}),r.a.createElement(m.a,{name:"email",component:"div",style:{color:"orange",marginBottom:30}}),r.a.createElement(E,{label:"Password",type:"password",name:"password",id:"password",styleLabel:"login-label",autoComplete:"off",style:Object(s.a)({},N.input)}),r.a.createElement(m.a,{name:"password",component:"div",style:{color:"orange",marginBottom:30}}),r.a.createElement("div",{className:" right-align"},r.a.createElement(y,{className:"login-btn",onClick:a,disabled:t,type:"submit"},"Sign In"))))}))))))},k=O;O.defaultProps={adminRoute:!1};var C=a(44),j=a.n(C),T=function(e){return j.a.create({baseURL:"http://localhost:5000/api",headers:{authorization:"Bearer "+e}})},x=function(e){var t=e.url,a=e.first,n=e.nextCursor;return new Promise((function(e,r){T().get(t,{params:{first:a,nextCursor:n}}).then((function(t){return e(t)})).catch((function(e){return r(e)}))}))},A=function(e,t,a,n){return new Promise((function(r,c){T(e).put(t,a,n).then((function(e){return r(e)})).catch((function(e){return c(e)}))}))},_=function(e,t){return new Promise((function(a,n){T(e).delete(t).then((function(e){return a(e)})).catch((function(e){return n(e)}))}))},w=function(e,t,a,n){return new Promise((function(r,c){T(e).post(t,a,n).then((function(e){return r(e)})).catch((function(e){return c(e)}))}))},S=r.a.createContext({marketList:[],categoryList:[],hasNext:!1,nextCursor:"",loading:!1,authUser:null,addCategory:function(e){},removeCategory:function(e){},addMarket:function(e){},removeMarket:function(e){},editMarket:function(e){},updateMarketList:function(e){},updateCategoryList:function(e){},updateHasNext:function(e){},updateNextCursor:function(e){},setLoading:function(e){},setAuthUser:function(e){}}),D=function(){var e=Object(i.g)(),t=Object(n.useContext)(S).setAuthUser;r.a.useEffect((function(){return document.body.classList.remove("has-fixed-sidenav"),function(){document.body.classList.add("has-fixed-sidenav")}}));return r.a.createElement(k,{handleSubmit:function(a,n){var r=n.setSubmitting;w(null,"/signin",{email:a.email.trim(),password:a.password.trim()}).then((function(a){t(a.data),localStorage.setItem("mmdb_auth_user",JSON.stringify(a.data)),e.push("/admin/markets")})).catch((function(e){r(!1),Te({message:e.message,color:"red"})}))}})},R=a(6),U=function(e){var t=e.children,a=e.className,n=Object(u.a)(e,["children","className"]);return r.a.createElement("div",Object.assign({className:Object(d.a)(["card",a])},n),t)},P=function(e){var t=e.children,a=e.className,n=Object(u.a)(e,["children","className"]);return r.a.createElement("div",Object.assign({className:Object(d.a)(["card-title",a])},n),t)},I=function(e){var t=e.children,a=e.className,n=Object(u.a)(e,["children","className"]);return r.a.createElement("div",Object.assign({className:Object(d.a)(["card-content",a])},n),t)},G=function(e){var t=e.children,a=e.className,n=Object(u.a)(e,["children","className"]);return r.a.createElement("div",Object.assign({className:Object(d.a)(["card-action",a])},n),t)},F=function(e){var t=e.className,a=e.src,n=e.children,c=e.text,l=Object(u.a)(e,["className","src","children","text"]);return r.a.createElement("div",Object.assign({className:Object(d.a)(["card-image",t])},l),r.a.createElement("img",{src:a,alt:c}),n)},B=(a(76),function(e){var t=e.market,a=e.toggleShouldEdit,c=Object(n.useState)(null),l=Object(R.a)(c,2),o=l[0],i=l[1],m=Object(n.useRef)(null),u=Object(n.useRef)(null),d=Object(n.useContext)(S),f=d.setLoading,E=d.authUser,p=d.editMarket,h=function(e){i(e.target.files[0])},y=t.images.map((function(e){return r.a.createElement("div",{key:e.fileId},r.a.createElement(F,{src:e.url}),r.a.createElement("div",{style:{marginTop:10,marginBottom:5,textAlign:"right"}},r.a.createElement("input",{onInput:h,ref:m,type:"file",name:e.name,id:e.fileId,hidden:!0}),!o&&r.a.createElement(v,{onClick:function(){return t=e.fileId,u.current=t,void m.current.click();var t}},"Change "),o&&e.fileId===u.current&&r.a.createElement(r.a.Fragment,null,r.a.createElement(v,{onClick:function(){return function(e){var a="/markets/image/"+e._id,n=new FormData;for(var r in n.append("image",o),e)n.append(r,e[r]);f(!0),A(E.token,a,n,{headers:{"content-type":"multipart/form-data"}}).then((function(e){f(!1);var a=t.images.map((function(t){return t._id===e.data._id?e.data:t})),n=Object(s.a)({},t,{images:a});p(n)})).catch((function(e){f(!1),Te({message:e.message,color:"red"})})),i(null),u.current=null}(e)}},"Save"),r.a.createElement("span",null,o.name))))}));return r.a.createElement(xe,null,r.a.createElement(U,null,r.a.createElement(I,{className:"show-market-items"},r.a.createElement(P,{className:"center"},"Food Market"),r.a.createElement(g,null,r.a.createElement(b,{sm:12,md:3},r.a.createElement("span",null,"Name:")),r.a.createElement(b,{sm:12,md:9},t.name)),r.a.createElement(g,null,r.a.createElement(b,{sm:12,md:3},r.a.createElement("span",null,"Description:")),r.a.createElement(b,{sm:12,md:9},t.description)),r.a.createElement(g,null,r.a.createElement(b,{sm:12,md:3},r.a.createElement("span",null,"Food Category:")),r.a.createElement(b,{sm:12,md:9},t.foodCategory)),r.a.createElement(g,null,r.a.createElement(b,{sm:12,md:3},r.a.createElement("span",null,"Address:")),r.a.createElement(b,{sm:12,md:9},t.address)),r.a.createElement(g,null,r.a.createElement(b,{sm:12,md:3},r.a.createElement("span",null,"Location:")),r.a.createElement(b,{sm:12,md:9},t.location.coordinates)),y),r.a.createElement(G,{className:"center"},r.a.createElement(v,{onClick:a},"Edit Market"))))}),H={login:{height:"100vh",marginBottom:0},header:{marginTop:0,padding:40},input:{padding:"5px 10px"}},K=function(e){var t=e.market,a=e.toggleShouldEdit,c=Object(n.useContext)(S),l=c.categoryList,o=c.authUser,u=c.editMarket,d=Object(i.g)(),f=l.length>0?l.map((function(e){return r.a.createElement("option",{key:e._id,value:e.name},e.name)})):r.a.createElement("option",{value:""},"No categories added yet!");return r.a.createElement(xe,null,r.a.createElement(U,null,r.a.createElement(I,null,r.a.createElement(P,{className:"center",style:{marginBottom:20}},r.a.createElement("span",null,"Edit Food market")),r.a.createElement(m.d,{initialValues:{name:t.name,foodCategory:t.foodCategory,description:t.description,address:t.address},validate:function(e){var t={};return e.name?e.description?e.address?e.foodCategory||(t.foodCategory="Category of market is required"):t.address="Address/Geolocation of the market is required":t.description="Description of market is required":t.name="Name of market is required",t},onSubmit:function(e,a){var n=a.setSubmitting;L.esri.Geocoding.geocode().address(e.address).run((function(a,r,c){if(a)Te({message:a.message,color:"red"});else{if(!r.results[0])return Te({message:"Try another address",color:"red"});var l=r.results[0].latlng,i=l.lat,m=l.lng,f=Object(s.a)({},e,{location:{type:"Point",coordinates:[m,i]}});A(o.token,"/markets/"+t._id,f).then((function(e){n(!1),u(e.data),Te({message:"Successfully changed",color:"green"}),d.push("/admin/markets")})).catch((function(e){n(!1),Te({message:e.message,color:"red"})}))}}))}},(function(e){var n=e.isSubmitting,c=e.submitForm;return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.c,null,r.a.createElement(E,{id:"name",name:"name",label:"Name of market",autoComplete:"off",type:"text",style:H.input}),r.a.createElement(m.a,{name:"name",component:"div",style:{color:"red"}}),r.a.createElement(E,{name:"description",label:"Description of market",autoComplete:"off",type:"text",id:"description",style:H.input}),r.a.createElement(m.a,{name:"description",component:"div",style:{color:"red"}}),r.a.createElement(E,{id:"address",name:"address",label:"Address/Geolocation",autoComplete:"off",style:H.input,type:"text"}),r.a.createElement(m.a,{name:"address",component:"div",style:{color:"red"}}),r.a.createElement(m.b,{name:"foodCategory",as:"select",style:{display:"block",backgroundColor:"inherit"}},r.a.createElement("option",{value:t.foodCategory},t.foodCategory),f),r.a.createElement(m.a,{name:"foodCategory",component:"div",style:{color:"red"}}),r.a.createElement("div",{className:" right-align",style:{marginTop:20}},r.a.createElement(v,{onClick:c,disabled:n,type:"submit"},"Submit"),r.a.createElement(v,{onClick:a,type:"submit"},"View"))),n&&r.a.createElement(je,null))})))))},Y=function(){var e=Object(n.useState)(!1),t=Object(R.a)(e,2),a=t[0],c=t[1],l=Object(n.useContext)(S).marketList,o=Object(i.h)().pathname,s=function(){var e=o.split("/")[3];return l.find((function(t){return t._id==e}))},m=function(){c((function(e){return!e}))};return r.a.createElement(r.a.Fragment,null,a&&s()&&r.a.createElement(K,{market:s(),toggleShouldEdit:m}),!a&&s()&&r.a.createElement(B,{market:s(),toggleShouldEdit:m,deleteMarket:function(e){}}))},q=a(45),V=a.n(q),z=[{name:"S/N",selector:"position",sortable:!0},{name:"Name",selector:"name",sortable:!0},{name:"Category",selector:"foodCategory",sortable:!0},{name:"Address",selector:"address",sortable:!0},{name:"Remove",selector:"remove"}],W=function(e){var t=e.children,a=e.className,n=Object(u.a)(e,["children","className"]);return r.a.createElement("i",Object.assign({className:Object(d.a)(["material-icons",a])},n),t)},J=function(e){var t,a=e.markets,n=e.loadMore,c=e.loadingMore,l=e.hasMore,o=e.deleteMarket,m=Object(i.g)(),u=function(){n()};return r.a.createElement(U,null,r.a.createElement(V.a,{title:"Market List",columns:z,data:(t=a,t.map((function(e,t){return Object(s.a)({},e,{position:t+1,location:e.location.coordinates,remove:(a=e._id,r.a.createElement(v,{className:"delete-category",onClick:function(){return o(a)}},r.a.createElement(W,{children:"delete"})))});var a}))),actions:r.a.createElement("div",null,l&&r.a.createElement(v,{disabled:c,onClick:u,className:"right"},"Load more"),r.a.createElement(v,{disabled:c,onClick:function(){return m.push("/admin/markets/new")},className:"right"},"Add Maket")),highlightOnHover:!0,pointerOnHover:!0,onRowClicked:function(e){m.push("/admin/markets/"+e._id,{id:e._id})},selectableRowsHighlight:!0}))},X=function(){var e=Object(n.useContext)(S),t=e.marketList,a=e.hasNext,c=e.nextCursor,l=e.loading,o=e.setLoading,i=e.updateHasNext,s=e.updateMarketList,m=e.updateNextCursor,u=e.removeMarket,d=e.authUser;return r.a.createElement(xe,null,r.a.createElement(J,{loadingMore:l,updateProductList:function(e){},markets:t,loadMore:function(){o(!0),x({url:"/markets",nextCursor:c}).then((function(e){o(!1),s(e.data.data),i(e.data.meta.hasNext),m(e.data.meta.nextCursor)})).catch((function(e){o(!1),Te({message:e.message,color:"red"})}))},hasMore:a,deleteMarket:function(e){o(!0),_(d.token,"/markets/"+e).then((function(t){o(!1),u(e)})).catch((function(e){o(!1),Te({message:e.message,color:"red"})}))}}))},$=(a(78),function(){var e=Object(i.h)().state;return Object(n.useEffect)((function(){var t,a=function(){if(e&&e.market)return e.market}();if(a.location.coordinates){var n=a.location.coordinates;t=L.map("map").setView(n,4),L.marker(n).addTo(t).bindPopup(function(e){return"\n\t\t <b>".concat(e.name,"</b></br>\n\t\t <p>").concat(e.foodCategory,"</p>\n\t\t <p>").concat(e.address,"</p></br>\n\n\t\t")}(a)).openPopup()}else t=L.map("map").setView([40.91,-96.63],10);L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://osm.org/copyright">OpenStreetMap</a> contributors'}).addTo(t)}),[]),r.a.createElement("div",{id:"map",style:{height:"100vh",marginTop:5}})}),Q=function(e){var t=e.images;return r.a.createElement(_e,{images:t})},Z=(a(79),function(e){var t=e.market,a=Object(i.g)();return r.a.createElement(xe,null,r.a.createElement(U,null,r.a.createElement(I,{className:"show-market-items"},r.a.createElement(P,{className:"center"},"Food Market"),r.a.createElement(g,null,r.a.createElement(b,{sm:12,md:3},r.a.createElement("span",null,"Name:")),r.a.createElement(b,{sm:12,md:9},t.name)),r.a.createElement(g,null,r.a.createElement(b,{sm:12,md:3},r.a.createElement("span",null,"Description:")),r.a.createElement(b,{sm:12,md:9},t.description)),r.a.createElement(g,null,r.a.createElement(b,{sm:12,md:3},r.a.createElement("span",null,"Food Category:")),r.a.createElement(b,{sm:12,md:9},t.foodCategory)),r.a.createElement(g,null,r.a.createElement(b,{sm:12,md:3},r.a.createElement("span",null,"Address:")),r.a.createElement(b,{sm:12,md:9},t.address)),r.a.createElement(Q,{images:t.images})),r.a.createElement(G,{className:"center"},r.a.createElement(v,{onClick:function(){a.push("/markets/"+t._id,{market:t})}},"View location on map"))))}),ee=function(){var e=Object(n.useContext)(S),t=e.marketList,a=e.hasNext,c=e.nextCursor,l=e.setLoading,o=e.updateHasNext,i=e.updateMarketList,s=e.updateNextCursor,m=t.length>0?t.map((function(e){return r.a.createElement(Z,{key:e._id,market:e})})):"No market added yet";return r.a.createElement(xe,null,r.a.createElement("h4",{style:{textAlign:"center"}},"Welcome to our food market locator"),r.a.createElement(g,{style:{marginTop:40}},r.a.createElement(b,{sm:12,md:8,mdOffset:2},m)),a&&r.a.createElement("div",{style:{textAlign:"right",marginBottom:20}},r.a.createElement(v,{onClick:function(){l(!0),x({url:"/markets",nextCursor:c}).then((function(e){l(!1),i(e.data.data),o(e.data.meta.hasNext),s(e.data.meta.nextCursor)})).catch((function(e){l(!1),Te({message:e.message,color:"red"})}))}},"Load More...")))},te={login:{height:"100vh",marginBottom:0},header:{marginTop:0,padding:40},input:{padding:"5px 10px"}},ae={name:"",description:"",address:"",foodCategory:""},ne=function(){var e=Object(n.useContext)(S),t=e.categoryList,a=e.addMarket,c=e.authUser,l=r.a.useState(null),o=Object(R.a)(l,2),i=o[0],u=o[1],d=function(e){u(e.target.files)},f=t.length>0?t.map((function(e){return r.a.createElement("option",{key:e._id,value:e.name},e.name)})):r.a.createElement("option",{value:""},"No categories added yet!");return r.a.createElement(xe,null,r.a.createElement(U,null,r.a.createElement(I,null,r.a.createElement(P,{className:"center",style:{marginBottom:20}},r.a.createElement("span",null,"Add new food market")),r.a.createElement(m.d,{initialValues:Object(s.a)({},ae),validate:function(e){var t={};return e.name?e.description?e.address?e.foodCategory||(t.foodCategory="Category of market is required"):t.address="Address/Geolocation of the market is required":t.description="Description of market is required":t.name="Name of market is required",t},onSubmit:function(e,t){var n=t.setSubmitting;if(3!==i.length)return Te({message:"Select 3 images",color:"red"}),void n(!1);L.esri.Geocoding.geocode().address(e.address).run((function(t,r,l){if(t)Te({message:t.message,color:"red"});else{if(!r.results[0])return Te({message:"Try another address",color:"red"});for(var o=r.results[0].latlng,m=o.lat,u=o.lng,d=new FormData,f=0;f<i.length;f++)d.append("images",i[f]);var E=Object(s.a)({},e,{lat:m,long:u});for(var g in E)d.append(g,E[g]);w(c.token,"/markets",d,{headers:{"content-type":"multipart/form-data"}}).then((function(e){n(!1),a(e.data),Te({message:"Successfully added",color:"green"})})).catch((function(e){n(!1),Te({message:e.message,color:"red"})}))}}))}},(function(e){var t=e.isSubmitting,a=e.submitForm;return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.c,null,r.a.createElement(E,{id:"name",name:"name",label:"Name of market",autoComplete:"off",type:"text",style:te.input,labelClassName:"noactive"}),r.a.createElement(m.a,{name:"name",component:"div",style:{color:"red"}}),r.a.createElement(E,{name:"description",label:"Description of market",autoComplete:"off",type:"text",id:"description",labelClassName:"noactive",style:te.input}),r.a.createElement(m.a,{name:"description",component:"div",style:{color:"red"}}),r.a.createElement(E,{id:"address",name:"address",label:"Address/Geolocation",autoComplete:"off",style:te.input,labelClassName:"noactive",type:"text"}),r.a.createElement(m.a,{name:"address",component:"div",style:{color:"red"}}),r.a.createElement(m.b,{name:"foodCategory",as:"select",style:{display:"block",backgroundColor:"inherit"}},r.a.createElement("option",{value:""},"Select Category"),f),r.a.createElement(m.a,{name:"foodCategory",component:"div",style:{color:"red"}}),r.a.createElement("div",{className:"file-field input-field"},r.a.createElement("div",{className:"btn indigo"},r.a.createElement("span",null,"Photos"),r.a.createElement("input",{type:"file",multiple:!0,onInput:d})),r.a.createElement("div",{className:"file-path-wrapper"},r.a.createElement("input",{className:"file-path validate",placeholder:"Select 3 photos",type:"text",onInput:d,multiple:!0}))),r.a.createElement("div",{className:" right-align",style:{marginTop:20}},r.a.createElement(v,{onClick:a,disabled:t,type:"submit"},"Submit"))),t&&r.a.createElement(je,null))})))))},re=function(e){var t=e.addCategory,a=r.a.useState(""),n=Object(R.a)(a,2),c=n[0],l=n[1];return r.a.createElement("div",null,r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{type:"text",name:"foodCategory",id:"foodCategory",onChange:function(e){return l(e.target.value)},value:c}),r.a.createElement("label",{htmlFor:"foodCategory"},"Name of Category")),r.a.createElement("div",{className:" right-align",style:{marginTop:20}},r.a.createElement(v,{onClick:function(){return t({name:c})}},"Submit")))},ce=function(e){var t=e.children,a=e.className,n=Object(u.a)(e,["children","className"]);return r.a.createElement("ul",Object.assign({className:Object(d.a)(["collection",a])},n),t)},le=function(e){var t=e.children,a=e.className,n=Object(u.a)(e,["children","className"]);return r.a.createElement("li",Object.assign({className:Object(d.a)(["collection-item",a])},n),t)},oe=function(e){var t=e.children,a=e.className,n=Object(u.a)(e,["children","className"]);return r.a.createElement("li",Object.assign({className:Object(d.a)(["collection-header",a])},n),t)},ie={itemContainer:{display:"flex",alignItems:"center",justifyContent:"space-between"}},se=function(e){var t=e.category,a=e.number,n=e.deleteCategory;return r.a.createElement(le,null,r.a.createElement("div",{style:ie.itemContainer},r.a.createElement("div",null,r.a.createElement("span",null,a,": "),t.name),r.a.createElement("div",{style:{textAlign:"right"}},r.a.createElement(v,{onClick:function(){return n(t._id)},className:"delete-category"},r.a.createElement(W,{children:"delete"})))))},me=function(){var e=r.a.useState(!1),t=Object(R.a)(e,2),a=t[0],c=t[1],l=Object(n.useContext)(S),o=l.categoryList,i=l.removeCategory,s=l.addCategory,m=l.authUser,u=l.setLoading,d=function(e){u(!0),_(m.token,"/categories/"+e).then((function(t){u(!1),i(e)})).catch((function(e){u(!1),Te({message:e.message,color:"red"})}))},f=o.map((function(e,t){return r.a.createElement(se,{deleteCategory:d,key:e._id,number:t+1,category:e})}));return r.a.createElement(xe,null,r.a.createElement(ce,{className:"with-header"},r.a.createElement(oe,null,"List of Categories"),f.length>0?f:"No category added yet"),r.a.createElement("div",{style:{textAlign:"right"}},a&&r.a.createElement(re,{addCategory:function(e){u(!0),w(m.token,"/categories",e).then((function(e){u(!1),s(e.data)})).catch((function(e){u(!1),Te({message:e.message,color:"red"})})),c(!1)}}),!a&&r.a.createElement(v,{onClick:function(){return c(!0)}},"Add")))},ue=function(){var e=Object(n.useContext)(S).setLoading,t=Object(n.useState)([]),a=Object(R.a)(t,2),c=a[0],l=a[1],o=Object(i.g)(),s=Object(i.h)().state;Object(n.useEffect)((function(){d()}),[s]);var m=function(t){var a=t.coords,n=[a.longitude,a.latitude];e(!0),function(e,t){return new Promise((function(a,n){T().get(e,{params:{coordinates:t}}).then((function(e){return a(e)})).catch((function(e){return n(e)}))}))}("/markets/nearest-market",n).then((function(t){e(!1),t.data&&o.push("/markets/"+t.data._id,{market:t.data})})).catch((function(t){e(!1),Te({message:t.message,color:"red"})}))},u=function(){Te({message:"Unable to retrieve your current position",color:"red"})},d=function(){var t=s?s.searchText.trim():"";"nearest market"===t.toLowerCase()?navigator.geolocation?navigator.geolocation.getCurrentPosition(m,u):Te({message:"Geolocation is not supported by your browser",color:"red"}):(e(!0),function(e,t){return new Promise((function(a,n){T().get(e,{params:{searchText:t}}).then((function(e){return a(e)})).catch((function(e){return n(e)}))}))}("/markets/search",t).then((function(t){e(!1),l(t.data)})).catch((function(t){e(!1),Te({message:t.message,color:"red"})})))},f=c.length>0?c.map((function(e){return r.a.createElement(Z,{key:e._id,market:e})})):"No results found";return r.a.createElement(xe,null,r.a.createElement("h4",{style:{textAlign:"center"}},"Search results"),r.a.createElement(g,{style:{marginTop:40}},r.a.createElement(b,{sm:12,md:8,mdOffset:2},f)))},de=(a(80),a(81),function(){var e=Object(i.g)(),t=Object(n.useContext)(S).setAuthUser;return r.a.createElement("div",{className:"navbar-fixed"},r.a.createElement("nav",{className:"navbar indigo"},r.a.createElement("div",{className:"nav-wrapper"},r.a.createElement("span",{onClick:function(){e.push("/")},className:"brand-logo link waves-effect white-text"},"MMDB"),r.a.createElement("ul",{id:"nav-mobile",className:"right"},r.a.createElement("li",{className:"right sign-out",onClick:function(){localStorage.setItem("mmdb_auth_user",""),t(null),e.push("/admin")}},r.a.createElement("i",{className:"fas fa-sign-out-alt"}))),r.a.createElement(o.b,{to:"#!","data-target":"sidenav-left",className:"sidenav-trigger left"},r.a.createElement(W,{children:"menu",className:"white-text"})))))}),fe={brand:{paddingTop:10,paddingBottom:10,paddingLeft:35,border:" solid 2px #f5f5f5"}},Ee=function(){return r.a.createElement("div",{className:"logo",style:fe.brand},r.a.createElement("span",{className:"logo-container",onClick:function(){window.location="/"},style:{borderBottom:0,cursor:"pointer"}},"Admin",r.a.createElement(W,{children:"view_comfy",className:"left"})))},ge=function(e){var t=e.sidebarLinks,a=e.closeSidenav,n=function(e){var t=e.split("/");return window.location.href.endsWith(t[t.length-1])},c=t.map((function(e,t){return r.a.createElement(le,{key:e.name+t,onClick:a},r.a.createElement(o.b,{to:e.url,activeClassName:Object(d.a)({active:n(e.url)}),className:"waves-effect waves-blue "},e.name,e.icon))}));return r.a.createElement("div",{id:"sidenav-left",className:"sidenav sidenav-fixed white",style:{borderRight:"solid 3px #f5f5f5"}},r.a.createElement(Ee,null),r.a.createElement(ce,{style:{marginTop:0}},c))},pe=function(){return r.a.createElement("footer",{className:"page-footer indigo darken-4 white-text"},r.a.createElement(xe,null,r.a.createElement(g,null,r.a.createElement(b,{sm:4,smOffset:2,md:3,mdOffset:3},r.a.createElement("h5",null,"About"),r.a.createElement("ul",{className:"white-text"},r.a.createElement("li",null,r.a.createElement("a",{className:"white-text",href:"#!"},"Blog")))),r.a.createElement(b,{sm:4,smOffset:2,md:3,mdOffset:3},r.a.createElement("h5",null,"Contact"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{className:"white-text",href:"#!"},"Github"))))),r.a.createElement(g,null,r.a.createElement(b,{sm:12},r.a.createElement("div",{className:"footer-copyright center-align"},r.a.createElement(xe,null,"\xa9 ",(new Date).getFullYear()," mmdb.com"))))))},he=[{url:"/admin/markets",component:r.a.createElement(X,null)},{url:"/admin/markets/new",component:r.a.createElement(ne,null)},{url:"/admin/markets/:id",component:r.a.createElement(Y,null)},{url:"/admin/categories",component:r.a.createElement(me,null)}],be=[{url:"/admin/markets",name:"Market List",icon:r.a.createElement("i",{className:"material-icons"},"dashboard")},{url:"/admin/markets/new",name:"Add New Market",icon:r.a.createElement("i",{className:"material-icons"},"add")},{url:"/admin/categories",name:"Category List",icon:r.a.createElement("i",{className:"material-icons"},"category")}],ve=[{url:"/",component:r.a.createElement(ee,null)},{url:"/markets/:id",component:r.a.createElement($,null)},{url:"/search-results",component:r.a.createElement(ue,null)}],ye=function(e){var t=e.children,a=r.a.useRef(null);r.a.useEffect((function(){var e=document.querySelectorAll(".sidenav");a.current=M.Sidenav.init(e)}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(de,null),r.a.createElement(ge,{sidebarLinks:be,closeSidenav:function(){a.current[0].close()}}),r.a.createElement("main",null,t),r.a.createElement(pe,null))},Ne=(a(82),""),Oe=function(){var e=Object(i.g)();return r.a.createElement("div",{className:"navbar-fixed"},r.a.createElement("nav",null,r.a.createElement("div",{className:"nav-wrapper indigo"},r.a.createElement(xe,null,r.a.createElement("ul",{id:"nav-mobile",className:""},r.a.createElement("li",{className:"left search"},r.a.createElement("input",{onChange:function(t){Ne=t.target.value,e.push("/search-results",{searchText:t.target.value})},type:"text",name:"searchTerm",placeholder:"Search by name, category or 'nearest market'",id:"search",autoFocus:!0,value:Ne})),r.a.createElement("li",{className:"waves-effect hide-on-med-and-down right"},r.a.createElement(o.b,{className:"white-text",to:"/",activeClassName:Object(d.a)({"active-route":function(e){var t=e.split("/");return window.location.href.endsWith(t[t.length-1])}("/")}),exact:!0},"Home")))))))},ke=function(e){var t=e.children;return r.a.useEffect((function(){document.body.classList.remove("has-fixed-sidenav")}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Oe,null),t,r.a.createElement(pe,null))},Ce=function(){var e=Object(n.useContext)(S).authUser;return r.a.createElement(i.d,null,he.map((function(t){return r.a.createElement(i.b,{key:t.url,path:t.url,exact:!0,render:function(){return e?r.a.createElement(ye,null,t.component):r.a.createElement(i.a,{to:"/admin"})}})})),ve.map((function(e){return r.a.createElement(i.b,{key:e.url,exact:!0,path:e.url,render:function(){return r.a.createElement(ke,null,e.component)}})})),r.a.createElement(i.b,{path:"/admin",exact:!0,render:function(){return console.log("/admin called"),e?r.a.createElement(i.a,{to:"/admin/markets"}):r.a.createElement(D,null)}}))},je=function(e){return r.a.createElement("div",Object.assign({className:"progress indigo"},e),r.a.createElement("div",{className:"indeterminate indigo lighten-4"}))},Te=function(e){var t=e.message,a=e.color,n=e.outDuration;M.toast({html:t,classes:a,outDuration:n||375})},xe=function(e){var t=e.children;Object(u.a)(e,["children"]);return r.a.createElement("div",{className:"container"},t)},Ae=(a(83),function(e){var t=e.image;return r.a.createElement("div",{className:"carousel-item",href:"#one!"},r.a.createElement("img",{src:t.url,alt:t.name,className:"carousel-image"}))}),_e=function(e){var t=e.images,a=e.indicators,n=r.a.useRef(null),c=r.a.useRef(null);r.a.useEffect((function(){var e=document.querySelectorAll(".carousel");return n.current=M.Carousel.init(e,{fullWidth:!0,indicators:a}),c.current=setInterval((function(){n.current.forEach((function(e){e.next()}))}),5e3),function(){clearInterval(c.current)}}));var l=t.map((function(e){return r.a.createElement(Ae,{image:e,key:e._id})}));return r.a.createElement("div",{className:"carousel carousel-slider center"},l)};a(84),a(85);var we=function(){var e=Object(n.useContext)(S),t=e.setAuthUser,a=e.updateCategoryList,c=e.setLoading,l=e.loading,i=e.updateMarketList,s=e.updateHasNext,m=e.updateNextCursor;return Object(n.useEffect)((function(){c(!0),x({url:"/markets"}).then((function(e){i(e.data.data),s(e.data.meta.hasNext),m(e.data.meta.nextCursor);var a=localStorage.getItem("mmdb_auth_user");return a&&t(JSON.parse(a)),x({url:"/categories"})})).then((function(e){c(!1),a(e.data)})).catch((function(e){c(!1),Te({message:e.message,color:"red"})}))}),[]),r.a.createElement(o.a,null,l&&r.a.createElement(je,null),r.a.createElement(Ce,{loading:l}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Se={ADD_MARKET:"ADD_MARKET",EDIT_MARKET:"EDIT_MARKET",DELETE_MARKET:"DELETE_MARKET",UPDATE_MARKET_LIST:"UPDATE_MARKET_LIST",UPDATE_CATEGORY_LIST:"UPDATE_CATEGORY_LIST",ADD_CATEGORY:"ADD_CATEGORY",DELETE_CATEGORY:"DELETE_CATEGORY",UPDATE_HAS_NEXT:"UPDATE_HAS_NEXT",UPDATE_CURSOR:"UPDATE_CURSOR",SET_AUTH_USER:"SET_AUTH_USER",SET_LOADING:"SET_LOADING"},Le=a(17),De=function(e,t){var a=t.type,n=t.payload;switch(a){case Se.ADD_MARKET:return[].concat(Object(Le.a)(e),[n]);case Se.DELETE_MARKET:return e.filter((function(e){return e._id!==n}));case Se.EDIT_MARKET:return e.map((function(e){return e._id===n._id?n:e}));case Se.UPDATE_MARKET_LIST:return[].concat(Object(Le.a)(e),Object(Le.a)(n));default:return e}},Re=function(e,t){var a=t.type,n=t.payload;switch(a){case Se.ADD_CATEGORY:return[].concat(Object(Le.a)(e),[n]);case Se.DELETE_CATEGORY:return e.filter((function(e){return e._id!==n}));case Se.UPDATE_CATEGORY_LIST:return[].concat(Object(Le.a)(e),Object(Le.a)(n));default:return e}},Me=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case Se.UPDATE_HAS_NEXT:return n;default:return e}},Ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case Se.UPDATE_CURSOR:return n;default:return e}},Pe=function(e,t){var a=t.type,n=t.payload;switch(a){case Se.SET_LOADING:return n;default:return e}},Ie=function(e,t){var a=t.type,n=t.payload;switch(a){case Se.SET_AUTH_USER:return n;default:return e}},Ge=function(e){var t=e.children,a=Object(n.useReducer)(De,[]),c=Object(R.a)(a,2),l=c[0],o=c[1],i=Object(n.useReducer)(Re,[]),s=Object(R.a)(i,2),m=s[0],u=s[1],d=Object(n.useReducer)(Me,!1),f=Object(R.a)(d,2),E=f[0],g=f[1],p=Object(n.useReducer)(Ue,""),h=Object(R.a)(p,2),b=h[0],v=h[1],y=Object(n.useReducer)(Pe,!1),N=Object(R.a)(y,2),O=N[0],k=N[1],C=Object(n.useReducer)(Ie,null),j=Object(R.a)(C,2),T=j[0],x=j[1];return r.a.createElement(S.Provider,{value:{marketList:l,categoryList:m,hasNext:E,nextCursor:b,loading:O,authUser:T,addCategory:function(e){u(function(e){return{type:Se.ADD_CATEGORY,payload:e}}(e))},removeCategory:function(e){u(function(e){return{type:Se.DELETE_CATEGORY,payload:e}}(e))},addMarket:function(e){o(function(e){return{type:Se.ADD_MARKET,payload:e}}(e))},removeMarket:function(e){o(function(e){return{type:Se.DELETE_MARKET,payload:e}}(e))},editMarket:function(e){o(function(e){return{type:Se.EDIT_MARKET,payload:e}}(e))},updateMarketList:function(e){o(function(e){return{type:Se.UPDATE_MARKET_LIST,payload:e}}(e))},updateCategoryList:function(e){u(function(e){return{type:Se.UPDATE_CATEGORY_LIST,payload:e}}(e))},updateHasNext:function(e){g(function(e){return{type:Se.UPDATE_HAS_NEXT,payload:e}}(e))},updateNextCursor:function(e){v(function(e){return{type:Se.UPDATE_CURSOR,payload:e}}(e))},setLoading:function(e){k(function(e){return{type:Se.SET_LOADING,payload:e}}(e))},setAuthUser:function(e){x(function(e){return{type:Se.SET_AUTH_USER,payload:e}}(e))}}},t)};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ge,null,r.a.createElement(we,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[49,1,2]]]);
//# sourceMappingURL=main.cf793923.chunk.js.map